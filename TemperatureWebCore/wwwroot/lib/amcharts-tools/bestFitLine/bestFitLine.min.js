AmCharts.bestFitLineProcess=function(a,b){function w(a,b,c){var d=b;if(c.categoryAxis.parseDates===!0){if(void 0!==c.dataDateFormat)var e=AmCharts.stringToDate(a,c.dataDateFormat);else var e=new Date(a);d=e.getTime(),d||(d=a)}return d}function x(a,b){var c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=a.length;if(j!=b.length)throw new Error("The parameters values_x and values_y need to have same size!");if(0===j)return[[],[]];for(var k=0;j>k;k++)h=a[k],i=b[k],c+=h,d+=i,f+=h*h,e+=h*i,g++;for(var l=(g*e-c*d)/(g*f-c*c),m=d/g-l*c/g,n=[],o=[],k=0;j>k;k++)h=a[k],i=h*l+m,n.push(h),o.push(i);return[n,o]}if(void 0!==a.dataProvider&&0!==a.dataProvider.length)for(var c=0;c<a.graphs.length;c++){var e,g,h,i,j,d=a.graphs[c],f=0;if(void 0!==d.bestFitLine){for(var k=[],l=[],m=0;m<a.dataProvider.length;m++){var n=w(a.dataProvider[m][a.categoryField],m,a),o=a.dataProvider[m][d.valueField];void 0!==o&&(k.push(n),l.push(a.dataProvider[m][d.valueField]),void 0===e&&(e=m),f=m,void 0===g&&(g=n),h=n),void 0===i&&(i=n),j=n}var p=x(k,l);if(d.bestFitLine.extend===!0){var q=a.dataProvider.length-1,r=h-g,s=p[1][0],t=p[1][p[1].length-1],u=(t-s)/r;e>0&&(k.unshift(i),l.unshift(s-(g-i)*u),e=0),q>f&&(k.push(j),l.push(t+(j-h)*u),f=q);var p=x(k,l);d.bestFitLine.includeInMinMax=!1}var v=d.bestFitLine;v.valueField=d.valueField+"FitLine",v.trendInited!==!0&&a.graphs.push(v),v.trendInited=!0,a.dataProvider[e][v.valueField]=p[1][0],a.dataProvider[f][v.valueField]=p[1][p[1].length-1],v.hideWithParent===!0&&(void 0===a.graphsWithTrendLines&&(a.graphsWithTrendLines=[]),a.graphsWithTrendLines.push(d),d.hiddenBefore=d.hidden===!0,1===a.graphsWithTrendLines.length&&a.addListener("drawn",function(b){for(var c=0;c<a.graphsWithTrendLines.length;c++){var d=a.graphsWithTrendLines[c];if(d.hidden===d.hiddenBefore)return;d.hiddenBefore=d.hidden,d.hidden&&!d.bestFitLine.hidden?a.hideGraph(d.bestFitLine):!d.hidden&&d.bestFitLine.hidden&&a.showGraph(d.bestFitLine)}}))}b===!0&&a.validateData()}},AmCharts.addInitHandler(function(a){AmCharts.bestFitLineProcess(a,!1)},["serial"]);